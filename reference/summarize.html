<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarize simulation results — summarize • SimEngine</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Summarize simulation results — summarize"><meta name="description" content="This function calculates summary statistics for simulation
    results, including descriptive statistics (e.g. measures of center or
    spread) and inferential statistics (e.g. bias or confidence interval
    coverage). All summary statistics are calculated over simulation
    replicates within a single simulation level."><meta property="og:description" content="This function calculates summary statistics for simulation
    results, including descriptive statistics (e.g. measures of center or
    spread) and inferential statistics (e.g. bias or confidence interval
    coverage). All summary statistics are calculated over simulation
    replicates within a single simulation level."><meta property="og:image" content="https://avi-kenny.github.io/SimEngine/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimEngine</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/SimEngine.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/advanced-functionality.html">Advanced functionality</a></li>
    <li><a class="dropdown-item" href="../articles/example_1.html">Example 1: Simulation-based power calculation</a></li>
    <li><a class="dropdown-item" href="../articles/example_2.html">Example 2: Comparing two standard error estimators</a></li>
    <li><a class="dropdown-item" href="../articles/parallelization.html">Parallelization</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Avi-Kenny/SimEngine/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarize simulation results</h1>
      <small class="dont-index">Source: <a href="https://github.com/Avi-Kenny/SimEngine/blob/master/R/summarize.R" class="external-link"><code>R/summarize.R</code></a></small>
      <div class="d-none name"><code>summarize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates summary statistics for simulation
    results, including descriptive statistics (e.g. measures of center or
    spread) and inferential statistics (e.g. bias or confidence interval
    coverage). All summary statistics are calculated over simulation
    replicates within a single simulation level.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">summarize</span><span class="op">(</span><span class="va">sim</span>, <span class="va">...</span>, mc_se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sim">sim<a class="anchor" aria-label="anchor" href="#arg-sim"></a></dt>
<dd><p>A simulation object of class <code>sim_obj</code>, usually created by
<code><a href="new_sim.html">new_sim</a></code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more lists, separated by commas, specifying desired
    summaries of the <code>sim</code> simulation object. See examples. Each list
    must have a <code>stat</code> item, which specifies the type of summary
    statistic to be calculated. The <code>na.rm</code> item indicates whether to
    exclude <code>NA</code> values when performing the calculation (with default
    being <code>FALSE</code>). For <code>stat</code> options where the <code>name</code> item
    is optional, if it is not provided, a name will be formed from the type
    of summary and the column on which the summary is performed. Additional
    required items are detailed below for each <code>stat</code> type.</p><ul><li><p><code>list(stat="mean", x="col_1", name="mean_col", na.rm=F)</code>
    computes the mean of column <code>sim$results$col_1</code> for each level
    combination and creates a summary column named <code>"mean_col"</code>. Other
    single-column summary statistics (see the next few items) work
    analogously. <code>name</code> is optional.</p></li>
<li><p><code>list(stat="median", ...)</code> computes the median.</p></li>
<li><p><code>list(stat="var", ...)</code> computes the variance.</p></li>
<li><p><code>list(stat="sd", ...)</code> computes the standard deviation.</p></li>
<li><p><code>list(stat="mad", ...)</code> computes the mean absolute deviation.</p></li>
<li><p><code>list(stat="iqr", ...)</code> computes the interquartile range.</p></li>
<li><p><code>list(stat="min", ...)</code> computes the minimum.</p></li>
<li><p><code>list(stat="max", ...)</code> computes the maximum.</p></li>
<li><p><code>list(stat="is_na", ...)</code> computes the number of NA values.</p></li>
<li><p><code>list(stat="correlation", x="col_1", y="col_2",
    name="cor_12")</code> computes the (Pearson's) correlation coefficient between
    <code>sim$results$col_1</code> and <code>sim$results$col_2</code> for each level
    combination and creates a summary column named <code>"cor_12"</code>.</p></li>
<li><p><code>list(stat="covariance", x="col_1", y="col_2",
    name="cov_12")</code> computes the covariance between <code>sim$results$col_1</code>
    and <code>sim$results$col_2</code> for each level combination and creates a
    summary column named <code>"cov_12"</code>.</p></li>
<li><p><code>list(stat="quantile", x="col_1", prob=0.8, name="q_col_1")</code>
    computes the 0.8 quantile of column <code>sim$results$col_1</code> and creates
    a summary column named <code>"q_col_1"</code>. <code>prob</code> can be any number in
    [0,1].</p></li>
<li><p><code>list(stat="bias", estimate="est", truth=5,
    name="bias_est")</code> computes the absolute bias of the estimator
    corresponding to column <code>"sim$results$est"</code>, relative to the true
    value given in <code>truth</code>, and creates a summary column named
    <code>"bias_est"</code>. <code>name</code> is optional. See <em>Details</em>.</p></li>
<li><p><code>list(stat="bias_pct", estimate="est", truth=5,
    name="bias_est")</code> computes the percent bias of the estimator
    corresponding to column <code>"sim$results$est"</code>, relative to the true
    value given in <code>truth</code>, and creates a summary column named
    <code>"bias_pct_est"</code>. <code>name</code> is optional. See <em>Details</em>.</p></li>
<li><p><code>list(stat="mse", estimate="est", truth=5,
    name="mse_est")</code> computes the mean squared error of the estimator
    corresponding to column <code>"sim$results$est"</code>, relative to the true
    value given in <code>truth</code>, and creates a summary column named
    <code>"mse_est"</code>. <code>name</code> is optional. See <em>Details</em>.</p></li>
<li><p><code>list(stat="mae", estimate="est", truth=5,
    name="mae_est")</code> computes the mean absolute error of the estimator
    corresponding to column <code>"sim$results$est"</code>, relative to the true
    value given in <code>truth</code>, and creates a summary column named
    <code>"mae_est"</code>. <code>name</code> is optional. See <em>Details</em>.</p></li>
<li><p><code>list(stat="coverage", estimate="est", se="se_est",
    truth=5, name="cov_est")</code> or
    <code>list(stat="coverage", lower="est_l", upper="est_u",
    truth=5, name="cov_est")</code> computes confidence interval coverage. With the
    first form, <code>estimate</code> gives the name of the variable in
    <code>sim$results</code> corresponding to the estimator of interest and
    <code>se</code> gives the name of the variable containing the standard error of
    the estimator of interest. With the second form, <code>lower</code> gives the
    name of the variable containing the confidence interval lower bound and
    <code>upper</code> gives the name of the confidence interval upper bound. In
    both cases, <code>truth</code> is the true value (see <em>Details</em>), and a
    summary column named <code>"cov_est"</code> is created.</p></li>
</ul></dd>


<dt id="arg-mc-se">mc_se<a class="anchor" aria-label="anchor" href="#arg-mc-se"></a></dt>
<dd><p>A logical argument indicating whether to compute Monte Carlo
standard error and associated confidence interval for inferential summary
statistics.  This applies only to the <code>bias</code>, <code>bias_pct</code>,
<code>mse</code>, <code>mae</code>, and <code>coverage</code> summary statistics.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing the result of each specified summary function
    as a column, for each of the simulation levels. The column <code>n_reps</code>
    returns the number of successful simulation replicates within each level.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p>For all inferential summaries there are three ways to specify
    <code>truth</code>: (1) a single number, meaning the estimand is the same
    across all simulation replicates and levels, (2) a numeric vector of the
    same length as the number of rows in <code>sim$results</code>, or (3) the name
    of a variable in <code>sim$results</code> containing the estimand of interest.</p></li>
<li><p>There are two ways to specify the confidence interval bounds for
    <code>coverage</code>. The first is to provide an <code>estimate</code> and its
    associated <code>se</code> (standard error). These should both be variables in
    <code>sim$results</code>. The function constructs a 95% Wald-type confidence
    interval of the form <code>(estimate-1.96*se, estimate+1.96*se)</code>. The
    alternative is to provide <code>lower</code> and <code>upper</code> bounds, which
    should also be variables in <code>sim$results</code>. In this case, the
    confidence interval is (<code>lower</code>, <code>upper</code>). The coverage is the
    proportion of simulation replicates for a given level combination in
    which <code>truth</code> lies within the interval.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_sim.html">new_sim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">create_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="va">n</span>, lambda<span class="op">=</span><span class="fl">5</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="va">est_mean</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span>, <span class="va">type</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">type</span><span class="op">==</span><span class="st">"M"</span><span class="op">)</span> <span class="op">{</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span> <span class="op">}</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">type</span><span class="op">==</span><span class="st">"V"</span><span class="op">)</span> <span class="op">{</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="set_levels.html">set_levels</a></span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">100</span>,<span class="fl">1000</span><span class="op">)</span>, est<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>,<span class="st">"V"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="set_config.html">set_config</a></span><span class="op">(</span>num_sim<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="set_script.html">set_script</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">create_data</span><span class="op">(</span><span class="va">L</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">lambda_hat</span> <span class="op">&lt;-</span> <span class="fu">est_mean</span><span class="op">(</span>dat<span class="op">=</span><span class="va">dat</span>, type<span class="op">=</span><span class="va">L</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"lambda_hat"</span><span class="op">=</span><span class="va">lambda_hat</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="run.html">run</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">summarize</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"mean"</span>, name<span class="op">=</span><span class="st">"mean_lambda_hat"</span>, x<span class="op">=</span><span class="st">"lambda_hat"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"mse"</span>, name<span class="op">=</span><span class="st">"lambda_mse"</span>, estimate<span class="op">=</span><span class="st">"lambda_hat"</span>, truth<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Avi Kenny, Charles Wolock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


---
title: "Getting started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{getting-started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(collapse=TRUE, comment="#>")
```

`Simba` is a package for structuring, maintaining, and running statistical simulations.

Here is a simple example that illustrates the basic workflow:

```{r}
library(simba)
library(magrittr) # !!!!! Finish NAMESSPACES chapter and get rid of this

sim <- new_sim()

sim %<>% set_config(
  num_sim = 10,
  parallel = "none"
)

sim %<>% set_levels(
 "rho" = c(0.1, 0.2),
 "eta" = c(2,3)
)

sim %<>% add_constants(
 "k" = 44,
 "tau" = c(0.25,0.5,0.75)
)

sim %<>% add_creator(
  "create_rct",
  function(n, sigma) {
    x <- runif(n)
    y <- 4*x + rnorm(n, mean=0, sd=sigma)
    return (data.frame(x=x,y=y))
  }
)

sim %<>% add_method(
  "OLS",
  function(data) {
    model <- lm(y~x, data=data)
    return (model$coefficients[["x"]])
  }
)

sim %>% run()

```

By convention, we use the pipe operators (`%>%` and `%<>%`) from the `magrittr` package; if you are unfamiliar with the pipe operator, check out the [magrittr documentation](https://magrittr.tidyverse.org/). In general, we will always use the compound pipe (`%<>%`) except for when we run the simulation with `sim %>% run()`, which uses the regular pipe (`%>%`).

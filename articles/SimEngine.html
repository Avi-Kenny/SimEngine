<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to SimEngine • SimEngine</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to SimEngine">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimEngine</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/SimEngine.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/advanced-functionality.html">Advanced functionality</a></li>
    <li><a class="dropdown-item" href="../articles/example_1.html">Example 1: Simulation-based power calculation</a></li>
    <li><a class="dropdown-item" href="../articles/example_2.html">Example 2: Comparing two standard error estimators</a></li>
    <li><a class="dropdown-item" href="../articles/parallelization.html">Parallelization</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Avi-Kenny/SimEngine/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to SimEngine</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Avi-Kenny/SimEngine/blob/master/vignettes/SimEngine.Rmd" class="external-link"><code>vignettes/SimEngine.Rmd</code></a></small>
      <div class="d-none name"><code>SimEngine.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><strong>SimEngine</strong> is an open-source R package for
structuring, maintaining, running, and debugging statistical simulations
on both local and cluster-based computing environments.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The goal of many statistical simulations is to compare the behavior
of two or more statistical methods; we use this framework to demonstrate
the <strong>SimEngine</strong> workflow. Most statistical simulations of
this type include three basic phases: (1) generate data, (2) run one or
more methods using the generated data, and (3) compare the performance
of the methods.</p>
<p>To briefly illustrate how these phases are implemented using , we use
a simple example of estimating the rate parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>
of a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Poisson</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mi>λ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Poisson}(\lambda)</annotation></semantics></math>
distribution. To anchor the simulation in a real-world situation, one
can imagine that a sample of size
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
from this Poisson distribution models the number of patients admitted
daily to a hospital over the course of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
consecutive days. Suppose that the data consist of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
independent and identically distributed observations
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub><mo>,</mo><msub><mi>X</mi><mn>2</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>X</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">X_1, X_2, \ldots, X_n</annotation></semantics></math>
drawn from a
Poisson(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>)
distribution. Since the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>
parameter of the Poisson distribution is equal to both the mean and the
variance, one may ask whether the sample mean (denoted
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>λ</mi><mo accent="true">̂</mo></mover><mrow><mi>M</mi><mo>,</mo><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">\hat{\lambda}_{M,n}</annotation></semantics></math>)
or the sample variance (denoted
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>λ</mi><mo accent="true">̂</mo></mover><mrow><mi>V</mi><mo>,</mo><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">\hat{\lambda}_{V,n}</annotation></semantics></math>)
is a better estimator of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>.</p>
<div class="section level3">
<h3 id="load-the-package-and-create-a-simulation-object">1) Load the package and create a simulation object<a class="anchor" aria-label="anchor" href="#load-the-package-and-create-a-simulation-object"></a>
</h3>
<p>After loading the package, the first step is to create a simulation
object (an R object of class <em>sim_obj</em>) using the
<code><a href="../reference/new_sim.html">new_sim()</a></code> function. The simulation object contains all
data, functions, and results related to the simulation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://avi-kenny.github.io/SimEngine/">SimEngine</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: magrittr</span></span>
<span><span class="co">#&gt; Welcome to SimEngine! Full package documentation can be found at:</span></span>
<span><span class="co">#&gt;  https://avi-kenny.github.io/SimEngine</span></span>
<span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_sim.html">new_sim</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="code-a-function-to-generate-data">2) Code a function to generate data<a class="anchor" aria-label="anchor" href="#code-a-function-to-generate-data"></a>
</h3>
<p>Many simulations involve a function that creates a dataset designed
to mimic a real-world data-generating mechanism. Here, we write and test
a simple function to generate a sample of <code>n</code> observations
from a Poisson distribution with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>=</mo><mn>20</mn></mrow><annotation encoding="application/x-tex">\lambda = 20</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">create_data</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span>n<span class="op">=</span><span class="va">n</span>, lambda<span class="op">=</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">create_data</span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 24 15 19 22 25 11 16 18 17 16</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="code-the-methods-or-other-functions">3) Code the methods (or other functions)<a class="anchor" aria-label="anchor" href="#code-the-methods-or-other-functions"></a>
</h3>
<p>With <strong>SimEngine</strong>, any functions declared (or loaded
via <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code>) are automatically stored in the simulation
object when the simulation runs. In this example, we test the sample
mean and sample variance estimators of the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>
parameter. For simplicity, we write this as a single function and use
the <code>type</code> argument to specify which estimator to use.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">est_lambda</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dat</span>, <span class="va">type</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">type</span><span class="op">==</span><span class="st">"M"</span><span class="op">)</span> <span class="op">{</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span> <span class="op">}</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">type</span><span class="op">==</span><span class="st">"V"</span><span class="op">)</span> <span class="op">{</span> <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">)</span> <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">create_data</span><span class="op">(</span>n<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span>
<span><span class="fu">est_lambda</span><span class="op">(</span>dat<span class="op">=</span><span class="va">dat</span>, type<span class="op">=</span><span class="st">"M"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 19.952</span></span>
<span><span class="fu">est_lambda</span><span class="op">(</span>dat<span class="op">=</span><span class="va">dat</span>, type<span class="op">=</span><span class="st">"V"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 20.02172</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="set-the-simulation-levels">4) Set the simulation levels<a class="anchor" aria-label="anchor" href="#set-the-simulation-levels"></a>
</h3>
<p>Often, we wish to run the same simulation multiple times. We refer to
each run as a <em>simulation replicate</em>. We may wish to vary certain
features of the simulation between replicates. In this example, perhaps
we choose to vary the sample size and the estimator used to estimate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>.
We refer to the features that vary as <em>simulation levels</em>; in the
example below, the simulation levels are the sample size
(<code>n</code>) and the estimator (<code>estimator</code>). We refer to
the values that each simulation level can take on as <em>level
values</em>; in the example below, the <code>n</code> level values are
<code>10</code>, <code>100</code>, and <code>1000</code>, and the
<code>estimator</code> level values are <code>"M"</code> (for “sample
mean”) and <code>"V"</code> (for “sample variance”). By default,
<strong>SimEngine</strong> runs one simulation replicate for each
combination of level values — in this case, six combinations — although
the user will typically want to increase this; 1,000 or 10,000
replicates per combination is typical.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/set_levels.html">set_levels</a></span><span class="op">(</span></span>
<span>  estimator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"V"</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that we make extensive use of the pipe operators
(<code>%&gt;%</code> and <code>%&lt;&gt;%</code>) from the
<strong>magrittr</strong> package; if you have never used pipes, see the
<a href="https://magrittr.tidyverse.org" class="external-link">magrittr documentation</a>.</p>
</div>
<div class="section level3">
<h3 id="create-a-simulation-script">5) Create a simulation script<a class="anchor" aria-label="anchor" href="#create-a-simulation-script"></a>
</h3>
<p>The simulation script is a user-written function that assembles the
pieces above (generating data, analyzing the data, and returning
results) to code the flow of a single simulation replicate. Within a
script, the current simulation level values can be referenced using the
special variable <code>L</code>. For instance, in the running example,
when the first simulation replicate is running, <code>L$estimator</code>
will equal <code>"M"</code> and <code>L$n</code> will equal
<code>10</code>. In the next replicate, <code>L$estimator</code> will
equal <code>"M"</code> and <code>L$n</code> will equal <code>100</code>,
and so on, until all level value combinations are run. The simulation
script will automatically have access to any functions or objects that
have been declared in the global environment.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/set_script.html">set_script</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">create_data</span><span class="op">(</span>n<span class="op">=</span><span class="va">L</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">lambda_hat</span> <span class="op">&lt;-</span> <span class="fu">est_lambda</span><span class="op">(</span>dat<span class="op">=</span><span class="va">dat</span>, type<span class="op">=</span><span class="va">L</span><span class="op">$</span><span class="va">estimator</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"lambda_hat"</span><span class="op">=</span><span class="va">lambda_hat</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>The simulation script should always return a list containing one or
more key-value pairs, where the keys are syntactically valid names. The
values may be simple data types (numbers, character strings, or boolean
values) or more complex data types (lists, dataframes, model objects,
etc.); see the Advanced Usage documentation for how to handle complex
data types. Note that in this example, the estimators could have been
coded instead as two different functions and then called from within the
script using the <code><a href="../reference/use_method.html">use_method()</a></code> function.</p>
</div>
<div class="section level3">
<h3 id="set-the-simulation-configuration">6) Set the simulation configuration<a class="anchor" aria-label="anchor" href="#set-the-simulation-configuration"></a>
</h3>
<p>The <code><a href="../reference/set_config.html">set_config()</a></code> function controls options related to
the entire simulation, such as the number of simulation replicates to
run for each level value combination and the parallelization type, if
desired (see the Parallelization documentation). Packages needed for the
simulation should be specified using the <code>packages</code> argument
of <code><a href="../reference/set_config.html">set_config()</a></code> (rather than using <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>
or <code><a href="https://rdrr.io/r/base/library.html" class="external-link">require()</a></code>). We set <code>num_sim</code> to 100, and so
<strong>SimEngine</strong> will run a total of 600 simulation replicates
(100 for each of the six level value combinations).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/set_config.html">set_config</a></span><span class="op">(</span></span>
<span>  num_sim <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"stringr"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'ggplot2'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:SimEngine':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     vars</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="run-the-simulation">7) Run the simulation<a class="anchor" aria-label="anchor" href="#run-the-simulation"></a>
</h3>
<p>All 600 replicates are run at once and results are stored in the
simulation object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Done. No errors or warnings detected.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="view-and-summarize-results">8) View and summarize results<a class="anchor" aria-label="anchor" href="#view-and-summarize-results"></a>
</h3>
<p>Once the simulation replicates have finished running, the
<code><a href="../reference/summarize.html">summarize()</a></code> function can be used to calculate common
summary statistics, such as bias, variance, mean squared error (MSE),
and confidence interval coverage.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/summarize.html">summarize</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"bias"</span>, name<span class="op">=</span><span class="st">"bias_lambda"</span>, estimate<span class="op">=</span><span class="st">"lambda_hat"</span>, truth<span class="op">=</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"mse"</span>, name<span class="op">=</span><span class="st">"mse_lambda"</span>, estimate<span class="op">=</span><span class="st">"lambda_hat"</span>, truth<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   level_id estimator    n n_reps bias_lambda   mse_lambda</span></span>
<span><span class="co">#&gt; 1        1         M   10    100  -0.0170000   2.02670000</span></span>
<span><span class="co">#&gt; 2        2         V   10    100   2.0398889 147.39792963</span></span>
<span><span class="co">#&gt; 3        3         M  100    100   0.0358000   0.25405400</span></span>
<span><span class="co">#&gt; 4        4         V  100    100   0.2552697   7.69693198</span></span>
<span><span class="co">#&gt; 5        5         M 1000    100   0.0000200   0.01927814</span></span>
<span><span class="co">#&gt; 6        6         V 1000    100  -0.1457773   0.69827047</span></span></code></pre></div>
<p>In this example, we see that the MSE of the sample variance is much
higher than that of the sample mean and that MSE decreases with
increasing sample size for both estimators, as expected. From the
<code>n_reps</code> column, we see that 100 replicates were successfully
run for each level value combination. Results for individual simulation
replicates can also be directly accessed via the
<code>sim$results</code> dataframe.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">results</span><span class="op">)</span></span>
<span><span class="co">#&gt;   sim_uid level_id rep_id estimator  n      runtime lambda_hat</span></span>
<span><span class="co">#&gt; 1       1        1      1         M 10 0.0004534721       21.2</span></span>
<span><span class="co">#&gt; 2       7        1      2         M 10 0.0002906322       19.8</span></span>
<span><span class="co">#&gt; 3       8        1      3         M 10 0.0002887249       19.0</span></span>
<span><span class="co">#&gt; 4       9        1      4         M 10 0.0002915859       22.3</span></span>
<span><span class="co">#&gt; 5      10        1      5         M 10 0.0002856255       21.2</span></span>
<span><span class="co">#&gt; 6      11        1      6         M 10 0.0002868176       20.0</span></span></code></pre></div>
<p>Above, the <code>sim_uid</code> uniquely identifies a single
simulation replicate and the <code>level_id</code> uniquely identifies a
level value combination. The <code>rep_id</code> is unique within a
given level value combination and identifies the index of that replicate
within the level value combination. The <code>runtime</code> column
shows the runtime of each replicate (in seconds).</p>
</div>
<div class="section level3">
<h3 id="update-a-simulation">9) Update a simulation<a class="anchor" aria-label="anchor" href="#update-a-simulation"></a>
</h3>
<p>After running a simulation, a user may want to update it by adding
additional level values or replicates; this can be done with the
<code><a href="../reference/update_sim.html">update_sim()</a></code> function. Prior to running
<code><a href="../reference/update_sim.html">update_sim()</a></code>, the functions <code><a href="../reference/set_levels.html">set_levels()</a></code>
and/or <code><a href="../reference/set_config.html">set_config()</a></code> are used to declare the updates that
should be performed. For example, the following code sets the total
number of replicates to 200 (i.e., adding 100 replicates to those that
have already been run) for each level value combination, and adds one
additional level value for <code>n</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/set_config.html">set_config</a></span><span class="op">(</span>num_sim <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span>
<span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/set_levels.html">set_levels</a></span><span class="op">(</span></span>
<span>  estimator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"V"</span><span class="op">)</span>,</span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>After the levels and/or configuration are updated,
<code><a href="../reference/update_sim.html">update_sim()</a></code> is called.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/compound.html" class="external-link">%&lt;&gt;%</a></span> <span class="fu"><a href="../reference/update_sim.html">update_sim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Done. No errors or warnings detected.</span></span></code></pre></div>
<p>Another call to <code><a href="../reference/summarize.html">summarize()</a></code> shows that the additional
replicates were successfully:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/summarize.html">summarize</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"bias"</span>, name<span class="op">=</span><span class="st">"bias_lambda"</span>, estimate<span class="op">=</span><span class="st">"lambda_hat"</span>, truth<span class="op">=</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stat<span class="op">=</span><span class="st">"mse"</span>, name<span class="op">=</span><span class="st">"mse_lambda"</span>, estimate<span class="op">=</span><span class="st">"lambda_hat"</span>, truth<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   level_id estimator     n n_reps bias_lambda   mse_lambda</span></span>
<span><span class="co">#&gt; 1        1         M    10    200 -0.01500000   1.92640000</span></span>
<span><span class="co">#&gt; 2        2         V    10    200  0.75911111 118.55581235</span></span>
<span><span class="co">#&gt; 3        3         M   100    200  0.02630000   0.22649900</span></span>
<span><span class="co">#&gt; 4        4         V   100    200 -0.04132424   6.64234842</span></span>
<span><span class="co">#&gt; 5        5         M  1000    200 -0.00612000   0.02069753</span></span>
<span><span class="co">#&gt; 6        6         V  1000    200 -0.07187527   0.66624237</span></span>
<span><span class="co">#&gt; 7        7         M 10000    200  0.00080950   0.00198466</span></span>
<span><span class="co">#&gt; 8        8         V 10000    200 -0.01427990   0.08795799</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Avi Kenny, Charles Wolock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
